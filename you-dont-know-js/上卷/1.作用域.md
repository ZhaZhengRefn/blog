# 作用域

## 编译原理
js其实是一门编译语言，但通常是编译后立即执行。
编译通常包含*三个*步骤:
1. 分词/词法分析(tokenizing/lexing)
- 概念: 
这个过程通过会将一段字符串分解成有意义的*词法单元*（token）如:```var a = 1;```会被分解为var、 a、 =、 1、 ;。五个词法单元。
- 区别: 
分词与词法分析的区别在于：分词是无状态的，词法分析调用的是由有状态的解析规则。
2. 解析/语法分析(parsing)
- 概念:
这个过程将词法单元流转换为抽象语法树，即AST。
3. 代码生成
- 概念:
即将抽象语法树转换为可执行的代码。

## 理解作用域
1. 概念:
作用域是一套规则，用于识别变量（标识符）在何处以及如何查找变量（如作用域嵌套）。
2. LHS与RHS:
- 概念:
如果查找的目的是赋值，如=操作符或调用函数时的传参操作，均会使用LHS查询。
如果查找的目的是获取变量的值，那么会使用RHS查询。
- 区别:
二者区别在于*在变量没有声明*的情况下，两种查询的结果会不一样。
LHS查询下若查找至全局作用域仍没有找到变量，则会报ReferenceError。
RHS查询下若没有找到变量，则会在全局作用域中创建一个并返回给引擎。但在严格模式下不会自动创建变量。